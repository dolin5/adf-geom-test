{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/quantizationUtils.js","../node_modules/@arcgis/core/symbols/cim/Rasterizer.js","../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js","../node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","../node_modules/@arcgis/core/symbols/support/previewCIMSymbol.js"],"names":["o","n","t","r","l","a","m","originPosition","scale","tolerance","translate","extent","xmin","ymax","s","Math","round","f","x","u","i","e","length","push","p","y","z","Array","T","G","points","I","L","O","g","rings","S","N","paths","d","ymin","xmax","zmin","zmax","mmin","mmax","U","E","k","q","b","v","P","this","_rasterizationCanvas","document","createElement","type","rasterizeSimpleFill","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","rasterizeSimpleLine","cap","fromSimpleMarker","fromCIMHatchFill","frame","markerPlacement","fromCIMInsidePolygon","rasterize","c","h","width","height","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","newColor","Uint8ClampedArray","_textRasterizationCanvas","setFontProperties","parameters","textLines","split","lineHeight","computeLineHeight","computeTextWidth","renderedLineHeight","pixelRatio","renderedHaloSize","halo","renderedWidth","renderedHeight","fillStyle","slice","toString","color","haloStyle","textAlign","renderHalo","globalCompositeOperation","fillText","premultiplyColors","_haloRasterizationCanvas","clearRect","strokeStyle","lineJoin","renderHaloEmulated","renderHaloNative","globalAlpha","lineWidth","strokeText","font","weight","family","textBaseline","horizontalAlignment","max","measureText","cos","PI","sin","Legend","Preview","targetSize","referenceSize","scaleFactor","M","fill","legend","geometry","canvasPaths","preview","stroke","Object","keys","map","name","alias","symbol","materialHash","cim","materialOverrides","analyzedCIM","hash","_spatialReference","_avoidSDF","_resourceCache","Map","_rasterizer","_textRasterizer","_pictureMarkerCache","centroid","analyzeCIMSymbol","attributes","rasterizeCIMSymbol","geometryType","spatialReference","fields","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","get","url","responseType","signal","set","_getRasterizedResource","offsetX","offsetY","rotation","rotateClockwise","angle","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","C","min","createImageData","rasterizedImage","_imageDataToCanvas","save","rotate","restore","imageData","anchorPosition","_imageDataCanvas","_getPictureResource","_rasterizePictureResource","_embedCIMLayerInVectorMarker","JSON","stringify","rasterizeJSONResource","_rasterizeTextResource","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","decoration","outlineColor","outlineSize","rasterizeText","abs","createPattern","setTransform","m11","m12","m21","m22","m41","m42","beginPath","moveTo","lineTo","closePath","apply","_imageTo32Array","markerGraphics","symbolLayers","maxSize","node","opacity","cimOptions","feature","fieldMap","clone","rasterizeCIMSymbolAsync","w","D","ceil","Image","src","toDataURL","appendChild"],"mappings":"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","file":"static/js/84.22c894ad.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{isPoint as n,isPolyline as t,isPolygon as r,isMultipoint as e,isExtent as u}from\"./jsonUtils.js\";function i(n){return n&&\"upperLeft\"===n.originPosition}const o=(n,t,r)=>[t,r],l=(n,t,r)=>[t,r,n[2]],a=(n,t,r)=>[t,r,n[2],n[3]];function m(n){if(!n)return null;return{originPosition:\"upper-left\"===n.originPosition?\"upperLeft\":\"lower-left\"===n.originPosition?\"lowerLeft\":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:n.extent?[n.extent.xmin,n.extent.ymax]:[0,0]}}function c(n,t){if(n===t||null==n&&null==t)return!0;if(null==n||null==t)return!1;let r,e,u,o,l,a;return i(n)?(r=n.translate[0],e=n.translate[1],u=n.scale[0]):(r=n.extent.xmin,e=n.extent.ymax,u=n.tolerance),i(t)?(o=t.translate[0],l=t.translate[1],a=t.scale[0]):(o=t.extent.xmin,l=t.extent.ymax,a=t.tolerance),r===o&&e===l&&u===a}function s({scale:n,translate:t},r){return Math.round((r-t[0])/n[0])}function f({scale:n,translate:t},r){return Math.round((t[1]-r)/n[1])}function x(n,t,r){const e=[];let u,i,o,l;for(let a=0;a<r.length;a++){const m=r[a];a>0?(o=s(n,m[0]),l=f(n,m[1]),o===u&&l===i||(e.push(t(m,o-u,l-i)),u=o,i=l)):(u=s(n,m[0]),i=f(n,m[1]),e.push(t(m,u,i)))}return e.length>0?e:null}function h(n,t,r){return t[0]=s(n,r[0]),t[3]=f(n,r[1]),t[2]=s(n,r[2]),t[1]=f(n,r[3]),t}function I(n,t,r,e){return x(n,r?e?a:l:e?l:o,t)}function g(n,t,r,e){const u=[],i=r?e?a:l:e?l:o;for(let o=0;o<t.length;o++){const r=x(n,i,t[o]);r&&r.length>=3&&u.push(r)}return u.length?u:null}function N(n,t,r,e){const u=[],i=r?e?a:l:e?l:o;for(let o=0;o<t.length;o++){const r=x(n,i,t[o]);r&&r.length>=2&&u.push(r)}return u.length?u:null}function p({scale:n,translate:t},r){return r*n[0]+t[0]}function y({scale:n,translate:t},r){return t[1]-r*n[1]}function z(n,t,r){const e=new Array(r.length);if(!r.length)return e;const[u,i]=n.scale;let o=p(n,r[0][0]),l=y(n,r[0][1]);e[0]=t(r[0],o,l);for(let a=1;a<r.length;a++){const n=r[a];o+=n[0]*u,l-=n[1]*i,e[a]=t(n,o,l)}return e}function T(n,t,r){const e=new Array(r.length);for(let u=0;u<r.length;u++)e[u]=z(n,t,r[u]);return e}function M(n,t,r){return r?(t[0]=p(n,r[0]),t[1]=y(n,r[3]),t[2]=p(n,r[2]),t[3]=y(n,r[1]),t):[p(n,t[0]),y(n,t[3]),p(n,t[2]),y(n,t[1])]}function E(n,t,r,e){return z(n,r?e?a:l:e?l:o,t)}function P(n,t,r,e){return T(n,r?e?a:l:e?l:o,t)}function b(n,t,r,e){return T(n,r?e?a:l:e?l:o,t)}function F(n,t,r){let[e,u]=r[0],i=Math.min(e,t[0]),o=Math.min(u,t[1]),l=Math.max(e,t[2]),a=Math.max(u,t[3]);for(let m=1;m<r.length;m++){const[n,t]=r[m];e+=n,u+=t,n<0&&(i=Math.min(i,e)),n>0&&(l=Math.max(l,e)),t<0?o=Math.min(o,u):t>0&&(a=Math.max(a,u))}return n[0]=i,n[1]=o,n[2]=l,n[3]=a,n}function V(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let r=0;r<t.length;r++)F(n,n,t[r]);return n}function Y(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(t,t,n)}function _(n){return V([0,0,0,0],n)}function A(n){return V([0,0,0,0],n)}function w(n,t,r,e,u){return t.xmin=s(n,r.xmin),t.ymin=f(n,r.ymin),t.xmax=s(n,r.xmax),t.ymax=f(n,r.ymax),t!==r&&(e&&(t.zmin=r.zmin,t.zmax=r.zmax),u&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function G(n,t,r,e,u){return t.points=I(n,r.points,e,u),t}function L(n,t,r,e,u){return t.x=s(n,r.x),t.y=f(n,r.y),t!==r&&(e&&(t.z=r.z),u&&(t.m=r.m)),t}function O(n,t,r,e,u){const i=g(n,r.rings,e,u);return i?(t.rings=i,t):null}function S(n,t,r,e,u){const i=N(n,r.paths,e,u);return i?(t.paths=i,t):null}function d(i,o){return i&&o?n(o)?L(i,{},o,!1,!1):t(o)?S(i,{},o,!1,!1):r(o)?O(i,{},o,!1,!1):e(o)?G(i,{},o,!1,!1):u(o)?w(i,{},o,!1,!1):null:null}function j(n,t,r,e,u){return t.xmin=p(n,r.xmin),t.ymin=y(n,r.ymin),t.xmax=p(n,r.xmax),t.ymax=y(n,r.ymax),t!==r&&(e&&(t.zmin=r.zmin,t.zmax=r.zmax),u&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function U(n,t,r,e,u){return t.points=E(n,r.points,e,u),t}function k(n,t,r,e,u){return t.x=p(n,r.x),t.y=y(n,r.y),t!==r&&(e&&(t.z=r.z),u&&(t.m=r.m)),t}function q(n,t,r,e,u){return t.rings=b(n,r.rings,e,u),t}function v(n,t,r,e,u){return t.paths=P(n,r.paths,e,u),t}export{c as equals,F as getQuantizedBoundsCoordsArray,V as getQuantizedBoundsCoordsArrayArray,_ as getQuantizedBoundsPaths,Y as getQuantizedBoundsPoints,A as getQuantizedBoundsRings,h as quantizeBounds,w as quantizeExtent,d as quantizeGeometry,G as quantizeMultipoint,N as quantizePaths,L as quantizePoint,I as quantizePoints,O as quantizePolygon,S as quantizePolyline,g as quantizeRings,s as quantizeX,f as quantizeY,m as toQuantizationTransform,M as unquantizeBounds,z as unquantizeCoordsArray,T as unquantizeCoordsArrayArray,j as unquantizeExtent,U as unquantizeMultipoint,P as unquantizePaths,k as unquantizePoint,E as unquantizePoints,q as unquantizePolygon,v as unquantizePolyline,b as unquantizeRings,p as unquantizeX,y as unquantizeY};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import t from\"./Rect.js\";import{getSDFInfo as a,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as i}from\"./utils.js\";const s=512;class o{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(i,s,o){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===i.type||\"esriSFS\"===i.type){const[r,t,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,i.style,s);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===i.type||\"esriSLS\"===i.type){const[r,t,a]=e.rasterizeSimpleLine(i.style,i.cap);return{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let m,l,f;if(\"simple-marker\"===i.type||\"esriSMS\"===i.type||\"line-marker\"===i.type?(m=r.fromSimpleMarker(i),f=a(m)):\"CIMHatchFill\"===i.type?(m=r.fromCIMHatchFill(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):i.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===i.markerPlacement.type?(m=r.fromCIMInsidePolygon(i),l=new t(m.frame.xmin,-m.frame.ymax,m.frame.xmax-m.frame.xmin,m.frame.ymax-m.frame.ymin)):(m=i,f=a(m)),f&&!o){const[e,r,t]=n(f);return e?{size:[r,t],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,h,p,y,u]=r.rasterize(this._rasterizationCanvas,m,l,!o);return c?{size:[h,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:u}:null}rasterizeImageResource(e,r,t,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=r;const n=this._rasterizationCanvas.getContext(\"2d\");t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute(\"width\",`${e}px`),t.setAttribute(\"height\",`${r}px`),n.drawImage(t,0,0,e,r));const o=n.getImageData(0,0,e,r),m=new Uint8Array(o.data);if(a)for(const i of a)if(i&&i.oldColor&&4===i.oldColor.length&&i.newColor&&4===i.newColor.length){const[e,r,t,a]=i.oldColor,[n,s,o,l]=i.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let i=0;i<m.length;i+=4)e===m[i]&&r===m[i+1]&&t===m[i+2]&&a===m[i+3]&&(m[i]=n,m[i+1]=s,m[i+2]=o,m[i+3]=l)}let l;for(let i=0;i<m.length;i+=4)l=m[i+3]/255,m[i]=m[i]*l,m[i+1]=m[i+1]*l,m[i+2]=m[i+2]*l;let f=m,c=e,h=r;const p=s;if(c>=p||h>=p){const t=c/h;t>1?(c=p,h=Math.round(p/t)):(h=p,c=Math.round(p*t)),f=new Uint8Array(4*c*h);const a=new Uint8ClampedArray(f.buffer);i(m,e,r,a,c,h,!1)}return{size:[c,h],image:new Uint32Array(f.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../core/screenUtils.js\";function e(t){return`rgb(${t.slice(0,3).toString()})`}function i(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(){}rasterizeText(t,r){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement(\"canvas\"));const o=this._textRasterizationCanvas,n=o.getContext(\"2d\");this.setFontProperties(n,r),this.parameters=r,this.textLines=t.split(/\\r?\\n/),this.lineHeight=this.computeLineHeight();const a=this.computeTextWidth(n,r),h=this.lineHeight*this.textLines.length;o.width=a,o.height=h,this.renderedLineHeight=Math.round(this.lineHeight*r.pixelRatio),this.renderedHaloSize=r.halo.size*r.pixelRatio,this.renderedWidth=a*r.pixelRatio,this.renderedHeight=h*r.pixelRatio,this.fillStyle=i(r.color),this.haloStyle=e(r.halo.color);const l=this.renderedLineHeight,d=this.renderedHaloSize;this.setFontProperties(n,r);const c=s(n.textAlign,this.renderedWidth)+d,g=d;let f=0,p=0;d>0&&this.renderHalo(n,c,g,f,p,r),p+=g,f+=c;for(const e of this.textLines)n.globalCompositeOperation=\"destination-out\",n.fillStyle=\"rgb(0, 0, 0)\",n.fillText(e,f,p),n.globalCompositeOperation=\"source-over\",n.fillStyle=this.fillStyle,n.fillText(e,f,p),p+=l;const u=n.getImageData(0,0,this.renderedWidth,this.renderedHeight),x=new Uint8Array(u.data);if(r.premultiplyColors){let t;for(let e=0;e<x.length;e+=4)t=x[e+3]/255,x[e]=x[e]*t,x[e+1]=x[e+1]*t,x[e+2]=x[e+2]*t}return{size:[this.renderedWidth,this.renderedHeight],image:new Uint32Array(x.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}renderHalo(t,e,i,r,s,o){const n=this.renderedWidth,a=this.renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement(\"canvas\")),this._haloRasterizationCanvas.width=n,this._haloRasterizationCanvas.height=a;const h=this._haloRasterizationCanvas,l=h.getContext(\"2d\");l.clearRect(0,0,n,a),this.setFontProperties(l,o),l.fillStyle=this.haloStyle,l.strokeStyle=this.haloStyle;const d=this.renderedHaloSize<3;l.lineJoin=d?\"miter\":\"round\",d?this.renderHaloEmulated(l,e,i):this.renderHaloNative(l,e,i),t.globalAlpha=this.parameters.halo.color[3],t.drawImage(h,0,0,n,a,r,s,n,a),t.globalAlpha=1}renderHaloEmulated(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const n of this.textLines){for(const[r,a]of o)t.fillText(n,e+s*r,i+s*a);i+=r}}renderHaloNative(t,e,i){const r=this.renderedLineHeight,s=this.renderedHaloSize;for(const o of this.textLines){const n=2*s,a=5,h=.1;for(let r=0;r<a;r++){const s=1-(a-1)*h+r*h;t.lineWidth=s*n,t.strokeText(o,e,i)}i+=r}}setFontProperties(e,i){const r=i.font,s=`${r.style} ${r.weight} ${t(i.size*i.pixelRatio)}px ${r.family}, sans-serif`;let o;switch(e.font=s,e.textBaseline=\"top\",i.horizontalAlignment){case\"left\":o=\"left\";break;case\"right\":o=\"right\";break;case\"center\":o=\"center\";break;default:o=\"left\"}e.textAlign=o}computeTextWidth(t,e){let i=0;for(const s of this.textLines)i=Math.max(i,t.measureText(s).width);const r=e.font;return(\"italic\"===r.style||\"oblique\"===r.style||\"string\"==typeof r.weight&&(\"bold\"===r.weight||\"bolder\"===r.weight)||\"number\"==typeof r.weight&&r.weight>600)&&(i+=.3*t.measureText(\"A\").width),i+=2*this.parameters.halo.size,Math.round(i)}computeLineHeight(){const t=1.275*this.parameters.size;return Math.round(t+2*this.parameters.halo.size)}}function s(t,e){return\"center\"===t?.5*e:\"right\"===t?e:0}const o=[];{const t=16;for(let e=0;e<360;e+=360/t)o.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}export default r;export{r as TextRasterizer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{throwIfAborted as t}from\"../../core/promiseUtils.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as a}from\"../../core/string.js\";import{getJsonType as i,isPolygon as s,isPolyline as o}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as n,analyzeCIMResource as c}from\"./cimAnalyzer.js\";import l from\"./Rasterizer.js\";import{TextRasterizer as m}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as h,evaluateValueOrFunction as f,colorToArray as g}from\"./utils.js\";import{scaleCIMMarker as y}from\"../support/cimSymbolUtils.js\";import u from\"../support/Symbol3DAnchorPosition2D.js\";var p;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(p||(p={}));const d=(e,t,a)=>{if(e&&e.targetSize){let i;if(a){const t=Math.max(a.frame.xmax-a.frame.xmin,a.frame.ymax-a.frame.ymin);i=e.targetSize/r(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},M={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:-2,ymin:2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class C{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._rasterizer=new l,this._textRasterizer=new m,this._pictureMarkerCache=new Map}async rasterizeCIMSymbolAsync(e,t,r,a,s,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":i(t.geometry):null)||z(e);const l=await this.analyzeCIMSymbol(e,t?I(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,s,o,n)}async analyzeCIMSymbol(e,r,a,i,s){const o=[],c=r?{geometryType:i,spatialReference:this._spatialReference,fields:r}:null;let l;await n(e.data,c,o,this._avoidSDF),t(s);for(const t of o)\"CIMPictureMarker\"!==t.cim.type&&\"CIMPictureFill\"!==t.cim.type&&\"CIMPictureStroke\"!==t.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(t,s))),a&&\"text\"===t.type&&\"string\"==typeof t.text&&t.text.indexOf(\"[\")>-1&&(t.text=h(a,t.text,t.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(t,r){const a=t.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await e(t.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,g=0,y=0;if(\"esriGeometryPoint\"===r){const e=d(a,n,null);if(g=f(n.offsetX,t,i,s)*e||0,y=f(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=f(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=f(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:g,offsetY:y,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),a=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=r(h)-m[0]*(.5+y),C=r(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const P=a.createImageData(l.size[0],l.size[1]);P.data.set(new Uint8ClampedArray(l.image.buffer));const x={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:P,anchorX:y,anchorY:u};c.push(x)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;a.save(),a.translate(r(e.offsetX),-r(e.offsetY)),a.translate(l,m),a.rotate(i),a.translate(-l,-m),a.drawImage(t,o,n),a.restore()}else a.drawImage(t,o+r(e.offsetX),n-r(e.offsetY))}const h=new u({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?a.getImageData(0,0,t.width,t.height):a.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(e,t,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const a=this._imageDataCanvas,i=a.getContext(\"2d\");return a.width=t,a.height=r,i.drawImage(e,0,0,t,r),new Uint32Array(i.getImageData(0,0,t,r).data.buffer)}_getRasterizedResource(e,t,r,i,s,o){let n,c,l,m;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=i&&i.style?i.style:p.Legend,h=\"esriGeometryPolyline\"===r?M.stroke[m]:M.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=f(e.width,t,s,o),{image:a,width:i,height:n}=this._getPictureResource(e,r);return this._rasterizePictureResource(e,a,i,n,h,r)}return null}({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=f(e.offsetX,t,s,o),e.cim.offsetY=f(e.offsetY,t,s,o),e.cim.rotation=f(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=P(e,t,s,o)),l=a(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,h)}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r));else{({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=this._rasterizer.rasterizeJSONResource(n,1,this._avoidSDF);a=r.image,i=r.size[0],c=r.size[1]}return this._rasterizePictureResource(e,a,i,c,h,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=P(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,h)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,i,s,o),m;({analyzedCIM:n,hash:l}=P(e,t,s,o));const r=d(i,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=f(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a);return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}y(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,i&&(l+=JSON.stringify(i));const h=this._resourceCache;return h.has(l)?h.get(l):(m=this._rasterizer.rasterizeJSONResource(c,window.devicePixelRatio||1,this._avoidSDF),h.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=d(r,e,null),o=f(e.text,t,a,i);if(!o||0===o.length)return null;const n=f(e.fontName,t,a,i),c=f(e.style,t,a,i),l=f(e.weight,t,a,i),m=f(e.decoration,t,a,i),h=f(e.size,t,a,i)*s,y=f(e.horizontalAlignment,t,a,i),u=f(e.verticalAlignment,t,a,i),p=g(f(e.color,t,a,i)),M=g(f(e.outlineColor,t,a,i)),C={color:p,size:h,horizontalAlignment:y,verticalAlignment:u,font:{family:n,style:c,weight:l,decoration:m},halo:{size:f(e.outlineSize,t,a,i)||0,color:M,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,C)}_rasterizePictureResource(e,t,a,i,n,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=r(Math.max(Math.abs(n.frame.ymax-n.frame.ymin),c)),l.width=r(Math.abs(n.frame.xmax-n.frame.xmin));const h=m.createImageData(a,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:r(e.cim.offsetX)||0,m42:r(e.cim.offsetY)||0});const p=n.canvasPaths;let d,M,C;s(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):o(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const s of d){const e=s?s.length:0;if(e>1){let t=s[0];m.moveTo(r(t[0]),r(t[1]));for(let a=1;a<e;++a)t=s[a],m.lineTo(r(t[0]),r(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t){const a=this._pictureMarkerCache.get(e.materialHash);if(!a)return null;const i=a.height/a.width,s=t?i>1?r(t):r(t)/i:a.width,o=t?i>1?r(t)*i:r(t):a.height;return{image:this._imageTo32Array(a,s,o),width:s,height:o}}_embedCIMLayerInVectorMarker(e,t){const r=s(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\";return{type:\"CIMVectorMarker\",frame:t.frame,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function I(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function z(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function P(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=c(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{C as CIMSymbolRasterizer,p as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.20/esri/copyright.txt for details.\n*/\nimport{px2pt as t}from\"../../core/screenUtils.js\";import{CIMSymbolRasterizer as e}from\"../cim/CIMSymbolRasterizer.js\";import{getCIMSymbolSize as a,scaleCIMSymbolTo as l}from\"./cimSymbolUtils.js\";const i=new e(null,!0),o=120;async function n(e,n={}){const{size:s,maxSize:c,node:m,opacity:r}=n,y=n.cimOptions||n,{feature:d,fieldMap:h,geometryType:p,style:u}=y,g=a(e),f=Math.min(null!=s?s:g,null!=c?c:t(o));f!==g&&(e=e.clone(),l(e,f,{preserveOutlineWidth:!0}));let M=3;e&&e.data&&e.data.symbol&&\"CIMPointSymbol\"!==e.data.symbol.type&&(M=1);const b=await i.rasterizeCIMSymbolAsync(e,d,h,p,{scaleFactor:M,style:u}),w=document.createElement(\"canvas\");w.width=b.imageData.width,w.height=b.imageData.height;w.getContext(\"2d\").putImageData(b.imageData,0,0);let C=w.width/M,D=w.height/M;if(null!=s&&(null==(null==n?void 0:n.scale)||(null==n?void 0:n.scale))){const t=C/D;C=t<=1?Math.ceil(f*t):f,D=t<=1?f:Math.ceil(f/t)}const I=new Image(C,D);return I.src=w.toDataURL(),null!=r&&(I.style.opacity=`${r}`),m&&m.appendChild(I),I}export{n as previewCIMSymbol};\n"],"sourceRoot":""}