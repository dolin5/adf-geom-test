(this["webpackJsonpadf-geom-test"]=this["webpackJsonpadf-geom-test"]||[]).push([[46],{384:function(e,t,r){},385:function(e,t,r){},387:function(e,t){function r(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=387},389:function(e,t,r){"use strict";r.r(t);var n=r(175),a=r.n(n),o=r(374),u=r.n(o),i=(r(384),r(385),r(22)),c=r(27),s=r(375),l=r(297),f=r(190),d=r(41),p=r(73),m=r(183),b="PlantingProjectID",P=function(e){var t={};return e.forEach((function(e){t[e.attributes.PlantingProjectID]=t[e.attributes.PlantingProjectID]||[],t[e.attributes.PlantingProjectID].push(e)})),t},g=function(e,t){var r=Object(i.a)(e,2),n=(r[0],r[1]),a=JSON.parse(JSON.stringify(n[0].attributes));a.OBJECTID=t;var o=new p.a({attributes:a});return o.geometry=j(n),o},j=function(e){var t=e.reduce((function(e,t){return e+t.geometry.x}),0)/e.length,r=e.reduce((function(e,t){return e+t.geometry.y}),0)/e.length,n=e[0].geometry.spatialReference;return new d.a({spatialReference:n,x:t,y:r})},y=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(e.current){var t=new l.a({basemap:"streets-vector"});new s.a({container:e.current,map:t,zoom:3,center:[-100,39]}).popup.defaultPopupTemplateEnabled=!0;var r={type:"simple",symbol:{type:"simple-marker",size:8,outline:{color:[0,196,0,1]},color:[0,196,0,.5]}},n=new f.default({url:"https://gis-test.arborday.org/server/rest/services/CP_Showcase_MVP_Data_Polygon/FeatureServer/0",minScale:99999,renderer:{type:"simple",symbol:{type:"simple-fill",outline:{color:[0,196,0,1]},color:[0,196,0,.25]}},outFields:["*"]}),a=new f.default({url:"https://gis-test.arborday.org/server/rest/services/CP_Showcase_MVP_Data_Points/FeatureServer/0",objectIdField:"OBJECTID",renderer:r,minScale:99999,outFields:["*"],popupEnabled:!0}),o={where:"1=1",outFields:[b,"PlantingProjectName","PlantingProjectType","CalendarYear","AcresRestored"],returnGeometry:!1,returnDistinctValues:!0};Promise.all([n.queryFeatures(o),a.queryFeatures(o)]).then((function(e){[].concat(Object(c.a)(e[0].features),[e[1].features]);var o={where:"PlantingProjectID IN ("+e[0].features.map((function(e){return e.attributes.PlantingProjectID})).join(",")+")",outFields:["*"],returnGeometry:!0},u={where:"PlantingProjectID IN ("+e[1].features.map((function(e){return e.attributes.PlantingProjectID})).join(",")+")",outFields:["*"],returnGeometry:!0};Promise.all([n.queryFeatures(o),a.queryFeatures(u)]).then((function(e){var o=e[0].features,u=e[1].features,i=o.map((function(e){return new p.a({attributes:e.attributes,geometry:e.geometry.centroid})})),s=[].concat(Object(c.a)(i),Object(c.a)(u)),l=P(s),d=Object.entries(l).map(g),m=a.createPopupTemplate(),b=a.fields.filter((function(e){return n.fields.map((function(e){return e.name})).includes(e.name)})),j=(a.fields.find((function(e){return"ForestCode"==e.name})),new f.default({source:d,objectIdField:"OBJECTID",renderer:r,maxScale:5e6,fields:b,popupTemplate:m})),y=new f.default({source:s,objectIdField:"OBJECTID",renderer:r,minScale:4999999,maxScale:1e5,fields:b,popupTemplate:m});t.addMany([j,y,n,a])}))}))}}),[]),Object(m.jsx)("div",{className:"mapDiv",ref:e})};var v=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(y,{})})},h=function(e){e&&e instanceof Function&&r.e(256).then(r.bind(null,835)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,u=t.getTTFB;r(e),n(e),a(e),o(e),u(e)}))};u.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root")),h()}},[[389,47,48]]]);
//# sourceMappingURL=main.59d88828.chunk.js.map